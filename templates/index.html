<!DOCTYPE html>
<html>
<script type="text/javascript">
  function script(url) {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = url;
    var x = document.getElementsByTagName('head')[0];
    x.appendChild(s);
  }
</script>

<head>
  <title>New App</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
  <script>
    script("https://code.jquery.com/jquery-3.3.1.slim.min.js");
  </script>
  <script>
    script("https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js");
  </script>
  <script>
    script("https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js");
  </script>
  <script>
    script("https://kit.fontawesome.com/c2bd3dfae5.js");
  </script>
  <link rel="stylesheet" href="https://bootswatch.com/4/flatly/bootstrap.css">

  <script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>

  <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="//cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">

  <style>
    .popover-body {
      padding-left: 0;
      padding-right: 0;
    }

    .post_reply {
      height: 20%;
    }

    .form-reply {
      height: 100%;
    }
  </style>
</head>
<header>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="padding: .3rem 1rem !important;">
    <a class="navbar-brand" href="{{url_for('home.home')}}">New App</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
      </ul>
      <ul class="navbar-nav mr-auto col-md-5 nav-fill" style="padding-right: 0">
        <li class="nav-item">
          <form action="{{url_for('home.home')}}" method="GET" hidden>
            <div class="input-group mb-0">
              {{search.search}}
              <div class="input-group-append">
                {{search.submit}}
              </div>
            </div>
          </form>
        </li>
      </ul>
      <ul class="navbar-nav">
        {% if current_user.is_authenticated == false %}
        <li class="nav-item">
          <a class="nav-link" style="cursor:pointer" data-toggle="modal" data-target="#login"><span
              class="fas fa-sign-in-alt"></span>
            Login</a>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" data-toggle="popover" data-dismiss="popover" data-placement="bottom"
            style="margin-bottom: 0" href="#"> <img style="margin-top: -1px;" title="profile image"
              class="rounded-circle img-responsive" src="{{current_user.avatar}}" height="25px">
            <h8>{{current_user.name}}</h8>
          </a>
          </a>
        </li>
      </ul>
      {% endif %}
    </div>
  </nav>

</header>

<body>
  <div class="container" id="cont" style="margin-top: 10px;">
    {% if current_user.is_authenticated %}
    <script>
      document.addEventListener("DOMContentLoaded", function (event) {
        $(function () {
          $("[data-toggle=popover]").popover({
            html: true,
            content: `
            <div id="popover-content">
                        <a class="nav-link" href="{{url_for('users.user',name=current_user.name,id=current_user.id)}}"> <span class="fas fa-user"></span> Profile</a>
                        <a class="nav-link" href="/logout"> <span class="fas fa-sign-out-alt"></span> Logout</a>   
                        {% if current_user.role == 10 %}
                          <a class="nav-link" href="/admin"> <span class="fas fa-user-shield"></span> Admin</a>
                        {% endif %} 
                    </div>
              `
          });
        });
      });
    </script>

    {% endif %}
    <script>
      $(document).ready(function () {
        // show the alert
        setTimeout(function () {
          $(".alert").alert('close');
        }, 2000);
      });
    </script>
    <script>
      function Create_Question() {
        var x = document.getElementById("create_question");
        if (x.style.display === "block") {
          x.style.display = "none";
        } else {
          x.style.display = "block";
        }
      }
    </script>

    {% for success in get_flashed_messages(category_filter=["success"]) %}
    <div class="alert alert-success alert-dismissible fade show" id="success-alert" role="alert">
      <i class="far fa-check-circle"></i>
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Success!</strong> {{success}}
    </div>
    {% endfor %}
    {% for error in get_flashed_messages(category_filter=["error"]) %}
    <div class="alert alert-danger alert-dismissible fade show" id="success-alert" role="alert">
      <i class="far fa-check-circle"></i>
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Error!</strong> {{error}}
    </div>
    {% endfor %}

    {% block content %}
    {% endblock %}

    {% if current_user.is_authenticated == false %}
    <div class="modal" id="register" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Register</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-signin" action="/register" role="form" method="POST">
              {{register.csrf_token}}
              {{register.username}}
              <br>
              {{register.realname}}
              <br>
              {{register.github}}
              <br>
              {{register.email}}
              <br>
              {{register.password}}
              <br>
              {{register.confirm_password}}
              <br>
              {{register.submit}}
            </form>
          </div>
          <div class="modal-footer">
            Already have an account? <a style="color:#18BC9C;cursor: pointer;margin-left: 5px;" data-toggle="modal"
              data-dismiss="modal" data-target="#login"> Login here</a>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="login" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Login</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-signin" action="/login" role="form" method="POST">
              {{register.csrf_token}}
              {{login.username}}
              <br>
              {{login.password}}
              <h8 style="font-size: 9px">Forgot Password?<a style="color:#18BC9C;cursor: pointer;margin-left: 2px;" data-toggle="modal"
              data-dismiss="modal" data-target="#reset_password">Click here</a></h8>
              <br>
              {{login.submit}}
            </form>
          </div>
          <div class="modal-footer">
            You don`t have an account? <a style="color:#18BC9C;cursor: pointer;margin-left: 5px;" data-toggle="modal"
              data-dismiss="modal" data-target="#register"> Register here</a>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="reset_password" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Reset Password</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-signin" action="{{url_for('users.reset_password')}}" role="form" method="POST">
              {{reset.csrf_token}}
              {{reset.email}}
              <br>
              {{reset.password}}
              <br>
              {{reset.submit}}
            </form>
          </div>
          <div class="modal-footer">
            Already have an account? <a style="color:#18BC9C;cursor: pointer;margin-left: 5px;" data-toggle="modal"
              data-dismiss="modal" data-target="#login"> Login here</a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</body>

</html>